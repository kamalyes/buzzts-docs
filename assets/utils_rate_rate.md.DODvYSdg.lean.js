var D=(c,F,s)=>new Promise((t,h)=>{var d=l=>{try{e(s.next(l))}catch(o){h(o)}},B=l=>{try{e(s.throw(l))}catch(o){h(o)}},e=l=>l.done?t(l.value):Promise.resolve(l.value).then(d,B);e((s=s.apply(c,F)).next())});import{u as P}from"./chunks/createElement.zD1w0kkE.js";import{b as m,b0 as T,b1 as R}from"./chunks/index.esm.IZ2Ywdbw.js";import{d as b,p as y,C as r,b as f,o as C,w as p,G as a,a as n,t as A,c as S,j as i,aL as E}from"./chunks/framework.C7iy5ImG.js";const x=b({__name:"sleep",setup(c){const F=y(!1),s=y(""),t=y(0);let h=null;function d(){return D(this,null,function*(){F.value=!0,s.value="等待中...",t.value=m(500,2e3),h=new T(t.value,()=>{s.value=`Sleep 回调: 等待 ${t.value} ms 完成`});try{yield h.promise,s.value=`Sleep Promise resolved after ${t.value} ms`}catch(e){s.value=`${e.message}`}finally{F.value=!1,h=null}})}function B(){h&&(h.cancel(),s.value="Sleep 已取消",F.value=!1,h=null)}return(e,l)=>{const o=r("n-button"),u=r("n-space"),k=r("n-text"),g=r("n-card");return C(),f(g,{title:"Sleep 类演示（随机等待时间，可取消）"},{default:p(()=>[a(u,{vertical:"",size:"large"},{default:p(()=>[a(u,null,{default:p(()=>[a(o,{type:"primary",loading:F.value,onClick:d},{default:p(()=>[n(" 运行 Sleep（随机等待 "+A(t.value)+" ms） ",1)]),_:1},8,["loading"]),a(o,{type:"error",disabled:!F.value,onClick:B},{default:p(()=>l[0]||(l[0]=[n(" 取消 Sleep ")])),_:1,__:[0]},8,["disabled"])]),_:1}),a(k,{style:{display:"block","margin-top":"8px"}},{default:p(()=>[n(A(s.value),1)]),_:1})]),_:1})]),_:1})}}}),w=b({__name:"timeoutPromise",setup(c){const F=y(!1),s=y(""),t=y(0);function h(){return D(this,null,function*(){F.value=!0,s.value="等待中...",t.value=m(500,4e3);const u=new Promise(k=>{setTimeout(()=>k(`延迟 ${t.value} ms 完成`),t.value)});try{const k=yield u;s.value=`成功: ${k}`}catch(k){s.value=`失败: ${k.message}`}finally{F.value=!1}})}const d=y(!1),B=y(""),e=y(0),l=y(0);function o(){return D(this,null,function*(){d.value=!0,B.value="等待中...",e.value=m(500,1500),l.value=m(e.value+500,3e3);const u=new Promise(g=>{setTimeout(()=>g(`延迟 ${e.value} ms 完成`),e.value)}),k=new R(u,l.value);try{const g=yield k.promise;B.value=`成功: ${g} （超时设置：${l.value} ms）`}catch(g){B.value=`失败: ${g.message} （延迟 ${e.value} ms，超时 ${l.value} ms）`}finally{d.value=!1}})}return(u,k)=>{const g=r("n-button"),_=r("n-text"),v=r("n-card"),q=r("n-space");return C(),f(v,{title:"随机延迟与超时演示，两个按钮独立控制"},{default:p(()=>[a(q,{vertical:"",size:"large"},{default:p(()=>[a(v,{title:"无超时随机延迟",size:"small"},{default:p(()=>[a(g,{type:"primary",loading:F.value,onClick:h},{default:p(()=>k[0]||(k[0]=[n(" 运行随机延迟（无超时） ")])),_:1,__:[0]},8,["loading"]),a(_,{style:{display:"block","margin-top":"8px"}},{default:p(()=>[n(A(s.value),1)]),_:1})]),_:1}),a(v,{title:"随机延迟 + 超时",size:"small"},{default:p(()=>[a(g,{type:"warning",loading:d.value,onClick:o},{default:p(()=>k[1]||(k[1]=[n(" 运行随机延迟 + 超时 ")])),_:1,__:[1]},8,["loading"]),a(_,{style:{display:"block","margin-top":"8px"}},{default:p(()=>[n(A(B.value),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),$={class:"buzzts-border"},I={id:"base-sleep",tabindex:"-1"},z={id:"param-sleep",tabindex:"-1"},V={id:"desc-sleep",tabindex:"-1"},N={class:"buzzts-border"},L={id:"base-timeoutPromise",tabindex:"-1"},O={id:"param-timeoutPromise",tabindex:"-1"},W={id:"desc-timeoutPromise",tabindex:"-1"},K=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"utils/rate/rate.md","filePath":"utils/rate/rate.md","lastUpdated":1752751320000}'),j={name:"utils/rate/rate.md"},M=Object.assign(j,{setup(c){return P(2),(F,s)=>{const t=r("divider-base"),h=r("divider-param"),d=r("divider-desc");return C(),S("div",null,[s[18]||(s[18]=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},[n("支持任意 "),i("code",null,"JavaScript"),n(" 环境或框架")]),i("p",null,"限流工具集")],-1)),s[19]||(s[19]=i("h3",{id:"sleep",tabindex:"-1"},[n("Sleep "),i("a",{class:"header-anchor",href:"#sleep","aria-label":'Permalink to "Sleep"'},"​")],-1)),s[20]||(s[20]=i("p",null,"可取消的延迟等待类，封装了延迟 Promise 和取消功能",-1)),i("div",$,[i("h4",I,[a(t),s[0]||(s[0]=n()),s[1]||(s[1]=i("a",{class:"header-anchor",href:"#base-sleep","aria-label":'Permalink to "<divider-base /> {#base-sleep}"'},"​",-1))]),a(x),s[6]||(s[6]=E("",1)),i("h4",z,[a(h),s[2]||(s[2]=n()),s[3]||(s[3]=i("a",{class:"header-anchor",href:"#param-sleep","aria-label":'Permalink to "<divider-param /> {#param-sleep}"'},"​",-1))]),s[7]||(s[7]=E("",2)),i("h4",V,[a(d),s[4]||(s[4]=n()),s[5]||(s[5]=i("a",{class:"header-anchor",href:"#desc-sleep","aria-label":'Permalink to "<divider-desc /> {#desc-sleep}"'},"​",-1))]),s[8]||(s[8]=i("ul",null,[i("li",null,"封装延迟 Promise，支持异步等待"),i("li",null,[n("支持取消等待，调用 "),i("code",null,"cancel"),n(" 会拒绝 Promise")]),i("li",null,"常用于异步等待场景，支持等待结束回调")],-1))]),s[21]||(s[21]=i("h3",{id:"timeoutpromise",tabindex:"-1"},[n("TimeoutPromise "),i("a",{class:"header-anchor",href:"#timeoutpromise","aria-label":'Permalink to "TimeoutPromise"'},"​")],-1)),s[22]||(s[22]=i("p",null,"给 Promise 设置超时时间的包装类，超过指定时间未完成则自动拒绝",-1)),i("div",N,[i("h4",L,[a(t),s[9]||(s[9]=n()),s[10]||(s[10]=i("a",{class:"header-anchor",href:"#base-timeoutPromise","aria-label":'Permalink to "<divider-base /> {#base-timeoutPromise}"'},"​",-1))]),a(w),s[15]||(s[15]=E("",1)),i("h4",O,[a(h),s[11]||(s[11]=n()),s[12]||(s[12]=i("a",{class:"header-anchor",href:"#param-timeoutPromise","aria-label":'Permalink to "<divider-param /> {#param-timeoutPromise}"'},"​",-1))]),s[16]||(s[16]=E("",2)),i("h4",W,[a(d),s[13]||(s[13]=n()),s[14]||(s[14]=i("a",{class:"header-anchor",href:"#desc-timeoutPromise","aria-label":'Permalink to "<divider-desc /> {#desc-timeoutPromise}"'},"​",-1))]),s[17]||(s[17]=i("ul",null,[i("li",null,"包装 Promise，添加超时功能"),i("li",null,"超过指定时间未完成，自动拒绝并抛出超时错误"),i("li",null,"常用于网络请求等异步操作的超时控制")],-1))])])}}});export{K as __pageData,M as default};
