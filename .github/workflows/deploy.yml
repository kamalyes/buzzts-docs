name: Deployment ğŸš€ # å·¥ä½œæµåç§°ï¼Œæ˜¾ç¤ºåœ¨ GitHub Actions é¡µé¢

on:
  push:
    branches: [master]  # ğŸ› ï¸ åªæœ‰ master åˆ†æ”¯æœ‰ push æ—¶æ‰è§¦å‘å·¥ä½œæµ
    paths-ignore:       # ğŸš« ä¸‹åˆ—æ–‡ä»¶å˜æ›´ä¸ä¼šè§¦å‘éƒ¨ç½²
      - README.md       # ğŸ“„ ä¿®æ”¹ README.md ä¸è§¦å‘éƒ¨ç½²

jobs:
  deploy:
    name: Build and Deploy to GitHub Pages ğŸ“¦â¡ï¸ğŸŒ # ä»»åŠ¡åç§°ï¼Œè¿è¡Œæ—¶æ˜¾ç¤º
    runs-on: ubuntu-latest                   # ğŸ§ è¿è¡Œç¯å¢ƒï¼Œä½¿ç”¨æœ€æ–°çš„ Ubuntu é•œåƒ

    steps:
      # ç¬¬ä¸€æ­¥ï¼šæ£€å‡ºä»£ç  ğŸ“¥
      - name: Checkout
        uses: actions/checkout@v5            # âœ… å®˜æ–¹ä»£ç æ£€å‡º actionï¼Œæ‹‰å–ä»£ç åˆ° runner

      # ç¬¬äºŒæ­¥ï¼šè®¾ç½® Node.js ç¯å¢ƒ âš™ï¸
      - name: Setup Node.js
        uses: actions/setup-node@v4          # ğŸ”§ è®¾ç½® Node.js ç‰ˆæœ¬
        with:
          node-version: "18.x"                # ğŸ“Œ ä½¿ç”¨ Node 18 ç‰ˆæœ¬

      # ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ– ğŸ“¦
      - name: Install dependencies
        run: yarn install                    # ğŸ“¥ å®‰è£…é¡¹ç›®ä¾èµ–

      # ç¬¬å››æ­¥ï¼šæ„å»ºé¡¹ç›® ğŸ—ï¸
      - name: Build
        run: yarn build                      # ğŸ”¨ æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç”Ÿæˆå‘å¸ƒæ–‡ä»¶

      # ç¬¬äº”æ­¥ï¼šéƒ¨ç½²åˆ° GitHub Pages ğŸŒ
      - name: Deploy to GitHub Pages
        uses: crazy-max/ghaction-github-pages@v4.2.0
        with:
          repo: kamalyes/buzzts-docs         # ğŸ“‚ ä»“åº“å
          target_branch: gh-pages            # ğŸ¯ å‘å¸ƒåˆ° gh-pages åˆ†æ”¯
          build_dir: docs/.vitepress/dist    # ğŸ“ æ„å»ºäº§ç‰©ç›®å½•
        env:
          GH_PAT: ${{ secrets.ACCESS_TOKEN }} # ğŸ”‘ è®¿é—®ä»¤ç‰Œï¼Œæ”¾åœ¨ secrets é‡Œä¿æŠ¤å®‰å…¨
